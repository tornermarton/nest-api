import 'reflect-metadata';
import { Prop } from '@nestjs/mongoose';

import { NestApiIdField, NestApiMetaField } from '../../api';
import { Entity } from '../../core';

export class MongooseEntity implements Entity {
  // Generated by mongodb
  @NestApiIdField({ description: 'The UUID of the resource' })
  public readonly id: string;

  @NestApiMetaField({
    description: 'The UUID of the user who created the resource',
  })
  @Prop({ required: true })
  public readonly createdBy: string;

  // Generated by mongodb
  @NestApiMetaField({
    description: 'The time when the resource was created',
  })
  public readonly createdAt: Date;

  @NestApiMetaField({
    description: 'The UUID of the user who last updated the resource',
  })
  @Prop({ required: true })
  public readonly updatedBy: string;

  // Generated by mongodb
  @NestApiMetaField({
    description: 'The time when the resource was last updated',
  })
  public readonly updatedAt: Date;
}
